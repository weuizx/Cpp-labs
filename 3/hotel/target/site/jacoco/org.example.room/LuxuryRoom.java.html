<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LuxuryRoom.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hotel</a> &gt; <a href="index.source.html" class="el_package">org.example.room</a> &gt; <span class="el_source">LuxuryRoom.java</span></div><h1>LuxuryRoom.java</h1><pre class="source lang-java linenums">package org.example.room;

import org.example.Guest;

import java.util.HashMap;
import java.util.Map;
import java.util.stream.Collectors;

/**
 * Класс, представляющий номер люкс в гостинице.
 * Номер люкс состоит из нескольких комнат и имеет определённую цену и вместимость.
 */
public class LuxuryRoom extends Room {

    private static final int PRICE = 30000;
    private static final int ROOM_SIZE = 2;

<span class="fc" id="L18">    private final Map&lt;Integer, Guest&gt; guests = new HashMap&lt;&gt;();</span>
    private final int numberOfRooms;

    /**
     * Конструктор для создания номера люкс.
     *
     * @param roomId Идентификатор номера.
     * @param numberOfRooms Количество комнат в номере люкс. Не может быть меньше 2.
     * @throws RuntimeException если количество комнат меньше 2.
     */
    public LuxuryRoom(int roomId, int numberOfRooms) {
<span class="fc" id="L29">        super(roomId);</span>
<span class="fc bfc" id="L30" title="All 2 branches covered.">        if (numberOfRooms &lt; 2) {</span>
<span class="fc" id="L31">            throw new RuntimeException(&quot;Количество комнат номера люкс должно быть не меньше 2!&quot;);</span>
        }
<span class="fc" id="L33">        this.numberOfRooms = numberOfRooms;</span>
<span class="fc" id="L34">    }</span>

    /**
     * Получить тип номера.
     *
     * @return Тип номера (LUXURY).
     */
    @Override
    public RoomType getRoomType() {
<span class="fc" id="L43">        return RoomType.LUXURY;</span>
    }

    /**
     * Получить цену номера.
     *
     * @return Цена номера (30000).
     */
    @Override
    public int getPrice() {
<span class="fc" id="L53">        return PRICE;</span>
    }

    /**
     * Получить размер номера.
     *
     * @return Размер номера (2).
     */
    @Override
    public int getRoomSize() {
<span class="fc" id="L63">        return ROOM_SIZE;</span>
    }

    /**
     * Получить количество зарегистрированных гостей в номере.
     *
     * @return Количество гостей в номере.
     */
    @Override
    public int getNumberOfGuests() {
<span class="fc" id="L73">        return guests.size();</span>
    }

    /**
     * Зарегистрировать гостя в номер.
     *
     * @param guest Гость, которого нужно зарегистрировать.
     * @throws RuntimeException если номер уже полностью занят.
     */
    @Override
    public void checkInGuest(Guest guest) {
<span class="fc bfc" id="L84" title="All 2 branches covered.">        if (this.guests.size() == ROOM_SIZE) {</span>
<span class="fc" id="L85">            throw new RuntimeException(&quot;Не удалось зарегистрировать гостя в номере &quot; + this.getRoomId() + &quot;. Номер занят!&quot;);</span>
        }
<span class="fc" id="L87">        guest.setRoomId(this.roomId);</span>
<span class="fc" id="L88">        this.guests.put(guest.getGuestId(), guest);</span>
<span class="fc" id="L89">        this.isFree = false;</span>
<span class="fc" id="L90">    }</span>

    /**
     * Выселить гостя из номера.
     *
     * @param guest Гость, которого нужно выселить.
     * @throws RuntimeException если гость не зарегистрирован в этом номере.
     */
    @Override
    public void evictGuest(Guest guest) {
<span class="fc" id="L100">        Guest removedGuest = this.guests.remove(guest.getGuestId());</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">        if (removedGuest == null) {</span>
<span class="fc" id="L102">            throw new RuntimeException(&quot;Не удалось выселить гостя &quot; + guest.getGuestId() + &quot; из номера &quot; +</span>
<span class="fc" id="L103">                    this.getRoomId() + &quot;. Гость в этом номере не живет!&quot;);</span>
        }
<span class="pc bpc" id="L105" title="1 of 2 branches missed.">        if (this.guests.isEmpty()) {</span>
<span class="fc" id="L106">            this.isFree = true;</span>
        }
<span class="fc" id="L108">    }</span>

    /**
     * Получить строковое представление номера люкс.
     *
     * @return Строка, содержащая информацию о номере, его статусе, типе, цене и гостях.
     */
    @Override
    public String toString() {
<span class="nc" id="L117">        return &quot;Номер комнаты : &quot; + roomId +</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">                &quot;\nстатус : &quot; + (isFree ? &quot;свободна&quot; : &quot;занята&quot;) +</span>
<span class="nc" id="L119">                &quot;\nтип : &quot; + getRoomType().getDescription() +</span>
<span class="nc" id="L120">                &quot;\nсуточный тариф : &quot; + getPrice() +</span>
<span class="nc" id="L121">                &quot;\nгости : \n&quot; + guests.values().stream().map(Guest::toString).collect(Collectors.joining(&quot;\n&quot;));</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>